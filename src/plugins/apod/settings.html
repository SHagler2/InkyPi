<div class="form-group">
    <label for="customDate" class="form-label">Date (optional)</label>
    <input type="date" id="customDate" name="customDate" class="form-input" />
</div>

<div class="form-group">
    <label for="randomizeApod" class="form-label">Randomize date</label>
    <div class="toggle-container">
        <input type="checkbox" id="randomizeApod" name="randomizeApod" class="toggle-checkbox" value="false"
            onclick="this.value = this.checked ? 'true' : 'false'; toggleDateField(this)">
        <label for="randomizeApod" class="toggle-label"></label>
    </div>
</div>

<div class="form-group">
    <label for="fitMode" class="form-label">Display Mode</label>
    <select id="fitMode" name="fitMode" class="form-input">
        <option value="fit">Fit (Letterbox - Full image visible)</option>
        <option value="fill">Fill (Crop - No black bars)</option>
    </select>
    <small style="display: block; margin-top: 5px; color: #666;">
        Fit: Shows entire image with black bars if needed<br>
        Fill: Crops edges to fill screen completely
    </small>
</div>

<script>
    function toggleDateField(toggle) {
        const $date = document.getElementById('customDate');
        $date.disabled = toggle.checked;
    }

    document.addEventListener('DOMContentLoaded', () => {
        const $toggle = document.getElementById('randomizeApod');
        const $date = document.getElementById('customDate');
        const $fitMode = document.getElementById('fitMode');

        const today = new Date().toISOString().split('T')[0];

        if (loadPluginSettings) {
            $toggle.checked = pluginSettings.randomizeApod === 'true';
            $toggle.value = pluginSettings.randomizeApod;
            $date.value = pluginSettings.customDate || today;
            $date.disabled = $toggle.checked;
            $fitMode.value = pluginSettings.fitMode || 'fit';
        } else {
            $toggle.checked = false;
            $toggle.value = "false";
            $date.value = today;
            $fitMode.value = 'fit';
        }
    });
</script>